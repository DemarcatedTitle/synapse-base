language: php
php:
  - 5.4
git:
  submodules: false
env:
  global:
    - SLACK_ORG=synapse PROJECT=public-projects
    - secure: idkcNXnZvkUzwCy8XAH2rw4QnWSW/twjkZ5LBdfwprP7PCNKa88NM08MHcyflD7nD/WHJ2DflnxN+HidNbVNPXexhvStAPfkQ68kk2+j8VL7t5f/lx2vAC56YFVoUW4Z32aXSt26QkUvPRMEvWL6O78sL6W+ERM7GHLkq/tbeLhOYFCEjoaEU4rbtIw6yZEdL+Rifdexjgi5IxkF7n6T8BF1dsqOicY2LxunswCZyDBS8E7GRr7rJuWiaAAPnNG04OUhkDX2NQmN7VT0nx7NNzfIMl2TJdZc5TwxpRy351R1fZiNPwTIdyu4b7U8xRhNgaNZmF9lskbTV/bsp2ln3A==
before_script:
  - composer install --prefer-source
script:
  - vendor/bin/phpunit --configuration phpunit.shippable.xml
  - vendor/bin/phpcs --standard=PSR2 src/*
notifications:
  email: false
after_failure:
  - python slack_notifier.py --project $PROJECT --org $SLACK_ORG --token $SLACK_TOKEN
